# Metaprogramming Ruby 2

## Key Concepts

This book demystifies Ruby metaprogramming as code that writes code, transforming mysterious language features into understandable patterns through a narrative journey following Bob the programmer learning these techniques over one week. The core philosophy presents metaprogramming as just programming, exploring how Ruby's open classes allow modification of existing code, the object model treats everything including classes as objects with singleton classes for individual behavior, and method lookup follows a clear path through the inheritance chain and included modules. Essential techniques include dynamic methods created with define_method to eliminate code duplication, method_missing for intercepting undefined method calls, and blocks as closures that capture their surrounding scope. The book demonstrates how frameworks like Rails leverage these capabilities for domain-specific languages, examined through real Rails source code including ActiveRecord's attribute methods, ActiveSupport::Concern for module composition, and the evolution of alias_method_chain into prepend for method wrapping.

## Who Should Read It and Why

This book targets Ruby developers who understand basic syntax but feel mystified by Rails magic or sophisticated gems that seem to bend language rules, wanting to graduate from following cookbook recipes to understanding the underlying mechanisms. Programmers coming from static languages like Java or C++ will discover how Ruby's dynamic nature enables abstractions impossible in their familiar environments, learning why code can be so concise yet powerful. The content particularly benefits gem authors and library designers who need to create elegant APIs that feel like natural language extensions rather than clunky method calls, along with Rails developers puzzled by how declarations like has_many generate methods dynamically or how validations hook into model lifecycle. The narrative teaching style with Bob's weekly journey makes complex topics approachable for those intimidated by academic treatments of reflection and introspection.

## Practical Applications

Readers will learn to write dynamic methods using define_method to generate repetitive code programmatically, implement method_missing for building flexible proxy objects or DSLs that respond to arbitrary method names, and create blank slate classes with BasicObject to avoid method name conflicts. The book demonstrates writing domain-specific languages using instance_eval for clean configuration syntax, implementing attribute readers and writers with class_eval for code generation, and using hook methods like inherited, included, and method_added to trigger behavior when classes or modules are extended. Advanced patterns include singleton methods for per-object behavior, eigenclasses for understanding where class methods live, and around aliases using prepend for clean method wrapping without name collisions. The Rails tour examines ActiveRecord's dynamic finder methods, the Concern pattern for mixin composition avoiding dependency order issues, and attribute methods' evolution from eval-based generation to define_method for better performance. Appendixes catalog common idioms like nil guards and Symbol#to_proc, provide DSL design guidance, and offer a spell book reference of key metaprogramming techniques with quick examples.
